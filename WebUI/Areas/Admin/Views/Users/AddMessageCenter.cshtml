@{
    ViewBag.Title = "添加消息";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutPage.cshtml";
}

<div class="div_left">
    @Html.Partial("LfetPartial")
</div>
<div class="div_right">
    <div class="item">
        <div class="ltitle">新建快递公司</div>

        <div class="tishi">
            <strong>操作说明：</strong><br />
            <span>
                1.可添加在线客服，访问统计，网站分享等第三方js脚本代码。支持同时使用多个代码。<br />
                2.请尽可能添加知名度高、认可度高的第三方代码，以确保网站安全。<br />
                3.由于添加不安全代码引起的网站访问异常、网站挂马等情况本公司概不负责。<br />
            </span>
        </div>

        <div class="con">

            <table width="800" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="100" height="40" align="right">消息标题：</td>
                    <td width="270">
                        @Html.TextBox("user_info_title", null, new { @style = "width:350px;" })
                    </td>
                </tr>
                <tr>
                    <td width="100" height="40" align="right">消息内容：</td>
                    <td width="270">
                        @Html.TextArea("user_info_content", new { @style = "width:350px; height:280px" })
                    </td>
                </tr>
                <tr>
                    <td height="30">&nbsp;</td>
                    <td height="40">
                        <input class="btn" id="submit01" type="submit" value="群发站内消息" />
                        <input class="btn" id="submit02" type="submit" value="群发电子邮箱" />
                        <input class="btn" id="submit03" type="submit" value="群发手机短信" />
                    </td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                </tr>
            </table>
            @Html.Hidden("tid")
        </div>
    </div>
</div>

<script>
    var user_info_title = $("#user_info_title");
    var user_info_content = $("#user_info_content");
    var submit01 = $("#submit01");
    var submit02 = $("#submit02");
    var submit03 = $("#submit03");
    var tid = $("#tid");
    submit01.click(function () {
        tid.val("01");
        if (user_info_title.val() == "" || user_info_title.val() == null) {
            alert("请输入消息标题");
            return false;
        }
        else
            if (user_info_content.val() == "" || user_info_content.val() == null) {
                alert("请输入消息内容");
                return false;
            } else {
                $.ajax({
                    url: "/Admin/Users/AddMessage",
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(
                        {
                            user_info_title: user_info_title.val(),
                            user_info_content: user_info_content.val(),
                            tid: tid.val()
                        }),
                    dataType: "JSON",
                    success: function (data) {
                        if (data == "NO") {
                            alert("操作失败");
                            return;
                        } else if (data == "OK") {
                            alert("操作成功");
                            window.location.href = "/Admin/Users/MessageCenter";
                        }
                    },
                    error: function (err) {
                        //alert("data error");
                        alert(err.reponseText);
                    }
                });
            }


    });
    submit02.click(function () {
        tid.val("02");
        if (user_info_title.val() == "" || user_info_title.val() == null) {
            alert("请输入消息标题");
            return false;
        }
        else
            if (user_info_content.val() == "" || user_info_content.val() == null) {
                alert("请输入消息内容");
                return false;
            } else {
                $.ajax({
                    url: "/Admin/Users/AddMessage",
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(
                        {
                            user_info_title: user_info_title.val(),
                            user_info_content: user_info_content.val(),
                            tid: tid.val()
                        }),
                    dataType: "JSON",
                    success: function (data) {
                        if (data == "NO") {
                            alert("操作失败");
                            return;
                        } else if (data == "OK") {
                            alert("操作成功");
                            window.location.href = "/Admin/Users/MessageCenter";
                        }
                    },
                    error: function (err) {
                        //alert("data error");
                        alert(err.reponseText);
                    }
                });
            }

    });
    submit03.click(function () {
        tid.val("03");
        if (user_info_title.val() == "" || user_info_title.val() == null) {
            alert("请输入消息标题");
            return false;
        }
        else
            if (user_info_content.val() == "" || user_info_content.val() == null) {
                alert("请输入消息内容");
                return false;
            } else {
                $.ajax({
                    url: "/Admin/Users/AddMessage",
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(
                        {
                            user_info_title: user_info_title.val(),
                            user_info_content: user_info_content.val(),
                            tid: tid.val()
                        }),
                    dataType: "JSON",
                    success: function (data) {
                        if (data == "NO") {
                            alert("操作失败");
                            return;
                        } else if (data == "OK") {
                            alert("操作成功");
                            window.location.href = "/Admin/Users/MessageCenter";
                        }
                    },
                    error: function (err) {
                        //alert("data error");
                        alert(err.reponseText);
                    }
                });
            }

    });


</script>